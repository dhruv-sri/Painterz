<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Welcome to painterz</title>
  <meta name="description" content="An very basic example of how to use the Wookmark jQuery plug-in.">
  <meta name="author" content="Christoph Ono, Sebastian Helzle">

  <meta name="viewport" content="width=device-width,initial-scale=1">





   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="dist/js/dropify.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.19.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.22.0/firebase-auth.js"></script>






  <!-- CSS Reset 
  <link rel="stylesheet" href="../bower_components/normalize.css/normalize.css">-->

  <!-- Global CSS for the page and tiles -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" type="text/css" href="CSS/index.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style type="text/css">
    
    #LogOut
          {
            float: right;
            margin-right: 30px;
            margin-top: 20px;
            border-color: red;
            color: grey;
            width: 100px;
            height: 25px;

          }

  </style>

</head>

<body>
<img src="logo.png" height="300px" margin-left='50%'>

  
  
  <div class="navbar">
  <a href="index1.html" class="active">All Pictures</a>
<a href="post.html" >Publish</a>
<a href="your.html" >Your Posts</a>
<a href="like.html" >Liked Posts</a>
<button type="submit"  value="SignOut" onclick="signOut();" id="LogOut">LogOut</button>
</div>
  
    <h1>Home</h1>
    <h2 class="header">Here are the top posts</h2>


  <div>
   
   
   <ul class="tiles-wrap animated" id="wookmark1">
       
        
      </ul>
  </div>

  <!-- Include the plug-in -->
  <script src="wookmark.js"></script>

  <!-- Once the page is loaded, initalize the plug-in. -->
  <script type="text/javascript">
    window.onload = function () {
      var wookmark1 = new Wookmark('#wookmark1', {
          outerOffset: 10, // Optional, the distance to the containers border
          itemWidth: 210 // Optional, the width of a grid item
      });

      
    };
  </script>
  
  <script type="text/javascript">


     
    var firebaseConfig = {
    apiKey: "AIzaSyDLg2d40DtVn8BZF7J87nejDBYbCrOBdao",
    authDomain: "painterz-e63c0.firebaseapp.com",
    databaseURL: "https://painterz-e63c0.firebaseio.com",
    projectId: "painterz-e63c0",
    storageBucket: "painterz-e63c0.appspot.com",
    messagingSenderId: "790972299898",
    appId: "1:790972299898:web:ed1eadc9172b7cb9b2d9c3",
    measurementId: "G-G571KJGE03"
  };

  firebase.initializeApp(firebaseConfig);

  

  var db = firebase.firestore();

    db.collection('Images').get().then(function(querySnapshot) {
      querySnapshot.forEach(function(doc) {
        $("#wookmark1").append(` <li class="myDIV"><img src="${doc.data()["banner"]}" width="200" height="283">
      <i class="fa fa-heart" id= 'imgid' style="font-size:30px;color:red; border-radius: 12px;"></i></li> 

            `);
      });
    });


   $(document).on("click","#imgid",function(){
      

//0console.log($(this).siblings()).attr("src");
db.collection("fav").add({
         banner: $($(this).siblings()[0]).attr("src"),
         userid : localStorage.getItem("userId")
       

        });
});

    firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
        //console.log("current user",user.uid);
        var user1= firebase.auth().currentUser.uid; 
localStorage.setItem("userId",user1);
    // User is signed in.
  } 
});



    function signOut(){
    
    firebase.auth().signOut();
    alert("Signed Out");
    window.open("form.html","_self");
//localStorage.removeItem("Userid");

    
  }



  </script>
</body>
</html>
